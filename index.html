<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roofing Business Priority Manager</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 20px; margin-bottom: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .stat-card { padding: 15px; border-radius: 8px; text-align: center; }
        .stat-card.blue { background: #e3f2fd; color: #1976d2; }
        .stat-card.red { background: #ffebee; color: #d32f2f; }
        .stat-card.green { background: #e8f5e8; color: #388e3c; }
        .stat-card.orange { background: #fff3e0; color: #f57c00; }
        .stat-number { font-size: 24px; font-weight: bold; margin-top: 5px; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        .form-control:focus { outline: none; border-color: #2196f3; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold; margin: 2px; }
        .btn-primary { background: #2196f3; color: white; }
        .btn-primary:hover { background: #1976d2; }
        .btn-success { background: #4caf50; color: white; }
        .btn-success:hover { background: #388e3c; }
        .btn-warning { background: #ff9800; color: white; }
        .btn-warning:hover { background: #f57c00; }
        .btn-danger { background: #f44336; color: white; }
        .btn-danger:hover { background: #d32f2f; }
        .btn-secondary { background: #757575; color: white; }
        .btn-secondary:hover { background: #616161; }
        .task-list { max-height: 500px; overflow-y: auto; }
        .task-item { border: 1px solid #e0e0e0; border-left: 4px solid #2196f3; border-radius: 4px; padding: 15px; margin-bottom: 10px; }
        .task-item.urgent { border-left-color: #f44336; background: #ffebee; }
        .task-item.important { border-left-color: #ff9800; background: #fff3e0; }
        .task-item.normal { border-left-color: #4caf50; background: #e8f5e8; }
        .task-item.overdue { border-left-color: #d32f2f; background: #ffcdd2; }
        .task-title { font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .task-meta { font-size: 12px; color: #666; margin-bottom: 8px; }
        .task-meta span { margin-right: 15px; }
        .task-actions { display: flex; gap: 5px; }
        .task-actions button { background: none; border: none; cursor: pointer; padding: 4px; border-radius: 4px; }
        .task-actions button:hover { background: #f5f5f5; }
        .priority-badge { padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: bold; }
        .priority-urgent { background: #ffcdd2; color: #d32f2f; }
        .priority-important { background: #fff3e0; color: #f57c00; }
        .priority-normal { background: #e8f5e8; color: #388e3c; }
        .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal.show { display: flex; }
        .modal-content { background: white; border-radius: 8px; padding: 20px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .hidden { display: none; }
        .auth-container { display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        .auth-card { background: white; border-radius: 8px; padding: 40px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); max-width: 400px; width: 100%; text-align: center; }
        .main-app { display: none; }
        .guide-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .guide-item { padding: 15px; border-radius: 8px; }
        .guide-item.red { background: #ffebee; color: #d32f2f; }
        .guide-item.blue { background: #e3f2fd; color: #1976d2; }
        .guide-item.green { background: #e8f5e8; color: #388e3c; }
        @media (max-width: 768px) { 
            .main-grid { grid-template-columns: 1fr; } 
            .form-grid { grid-template-columns: 1fr; }
            .stats { grid-template-columns: repeat(2, 1fr); }
            .header { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>
    <!-- Authentication Screen -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <h1>üè† Roofing Priority Manager</h1>
            <p style="margin-bottom: 20px; color: #666;">Access your business dashboard</p>
            <div class="form-group">
                <input type="password" id="passwordInput" class="form-control" placeholder="Enter password">
            </div>
            <button onclick="doLogin()" class="btn btn-primary" style="width: 100%;">Login</button>
        </div>
    </div>

```
<!-- Main Application -->
<div class="main-app" id="mainApp">
    <div class="container">
        <div class="card">
            <div class="header">
                <h1>Roofing Business Priority Manager</h1>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-success" onclick="showReport()">üìä Report</button>
                    <button class="btn btn-primary" onclick="exportData()">üíæ Export</button>
                    <button class="btn btn-secondary" onclick="doLogout()">Logout</button>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card blue">
                    <div>Total Time Needed</div>
                    <div class="stat-number" id="totalTime">0h 0m</div>
                </div>
                <div class="stat-card red">
                    <div>High Priority Tasks</div>
                    <div class="stat-number" id="highPriority">0</div>
                </div>
                <div class="stat-card green">
                    <div>Completed Tasks</div>
                    <div class="stat-number" id="completedTasks">0</div>
                </div>
                <div class="stat-card orange">
                    <div>Overdue Tasks</div>
                    <div class="stat-number" id="overdueTasks">0</div>
                </div>
            </div>

            <div class="main-grid">
                <div>
                    <h2 style="margin-bottom: 15px;">Add New Task</h2>
                    <form id="taskForm" onsubmit="return addTask()">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="What needs to be done?" id="taskTitle" required>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Category</label>
                                <select class="form-control" id="taskCategory">
                                    <option value="business-dev">Business Development</option>
                                    <option value="sales">Sales</option>
                                    <option value="pricing">Pricing Models</option>
                                    <option value="templates">Templates</option>
                                    <option value="estimates" selected>Estimates</option>
                                    <option value="presentations">Presentations</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Time (minutes)</label>
                                <input type="number" class="form-control" id="taskTime" value="60" min="1">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Assigned To</label>
                                <select class="form-control" id="taskAssignee">
                                    <option value="John Smith">John Smith</option>
                                    <option value="Mike Johnson">Mike Johnson</option>
                                    <option value="Sarah Davis">Sarah Davis</option>
                                    <option value="Tom Wilson">Tom Wilson</option>
                                    <option value="Lisa Brown">Lisa Brown</option>
                                    <option value="Unassigned">Unassigned</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Due Date</label>
                                <input type="date" class="form-control" id="taskDueDate">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Urgency</label>
                                <select class="form-control" id="taskUrgency">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Business Impact</label>
                                <select class="form-control" id="taskImpact">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">‚ûï Add Task</button>
                    </form>
                </div>

                <div>
                    <h2 style="margin-bottom: 15px;">Priority Queue</h2>
                    <div class="task-list" id="taskList">
                        <div style="text-align: center; padding: 40px; color: #666;">Add your first task to get started!</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 style="margin-bottom: 15px;">Quick Action Guide</h2>
            <div class="guide-grid">
                <div class="guide-item red">
                    <h3>üî• Do First (High Urgency + High Impact)</h3>
                    <p>Customer estimates, urgent repairs, time-sensitive bids</p>
                </div>
                <div class="guide-item blue">
                    <h3>üìÖ Schedule (Low Urgency + High Impact)</h3>
                    <p>Build templates, pricing models, business development</p>
                </div>
                <div class="guide-item green">
                    <h3>‚ö° Quick Wins (High Urgency + Low Impact)</h3>
                    <p>Quick calls, simple follow-ups, routine admin</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Task Closure Modal -->
<div class="modal" id="closureModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Close Task</h3>
            <button onclick="closeModal('closureModal')" style="background: none; border: none; font-size: 18px; cursor: pointer;">‚úï</button>
        </div>
        <div id="closureContent"></div>
    </div>
</div>

<!-- Report Modal -->
<div class="modal" id="reportModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Performance Report</h3>
            <button onclick="closeModal('reportModal')" style="background: none; border: none; font-size: 18px; cursor: pointer;">‚úï</button>
        </div>
        <div id="reportContent"></div>
    </div>
</div>

<script>
    // Simple global variables
    var allTasks = [];
    var completedTasks = [];
    var currentTask = null;

    // Categories
    var taskCategories = {
        'business-dev': { name: 'Business Development', icon: 'üë•' },
        'sales': { name: 'Sales', icon: 'üí∞' },
        'pricing': { name: 'Pricing Models', icon: 'üí≤' },
        'templates': { name: 'Templates', icon: 'üìÑ' },
        'estimates': { name: 'Estimates', icon: '‚úèÔ∏è' },
        'presentations': { name: 'Presentations', icon: 'üìä' }
    };

    // Simple login function
    function doLogin() {
        var pwd = document.getElementById('passwordInput').value;
        if (pwd === 'roofing123') {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            initApp();
        } else {
            alert('Wrong password');
        }
    }

    // Simple logout function
    function doLogout() {
        document.getElementById('authContainer').style.display = 'flex';
        document.getElementById('mainApp').style.display = 'none';
        document.getElementById('passwordInput').value = '';
    }

    // Initialize app
    function initApp() {
        setTodayDate();
        loadTasks();
        showTasks();
        updateNumbers();
    }

    // Set today's date
    function setTodayDate() {
        var today = new Date();
        var year = today.getFullYear();
        var month = today.getMonth() + 1;
        var day = today.getDate();
        
        if (month < 10) month = '0' + month;
        if (day < 10) day = '0' + day;
        
        document.getElementById('taskDueDate').value = year + '-' + month + '-' + day;
    }

    // Add task function
    function addTask() {
        var title = document.getElementById('taskTitle').value;
        var category = document.getElementById('taskCategory').value;
        var time = document.getElementById('taskTime').value;
        var assignee = document.getElementById('taskAssignee').value;
        var dueDate = document.getElementById('taskDueDate').value;
        var urgency = document.getElementById('taskUrgency').value;
        var impact = document.getElementById('taskImpact').value;

        if (!title) {
            alert('Please enter a task title');
            return false;
        }

        var newTask = {
            id: new Date().getTime(),
            title: title,
            category: category,
            time: parseInt(time) || 60,
            assignee: assignee,
            dueDate: dueDate,
            urgency: urgency,
            impact: impact,
            status: 'active',
            created: new Date().toISOString().split('T')[0]
        };

        allTasks.push(newTask);
        
        // Clear form
        document.getElementById('taskForm').reset();
        document.getElementById('taskCategory').value = 'estimates';
        document.getElementById('taskTime').value = '60';
        document.getElementById('taskUrgency').value = 'medium';
        document.getElementById('taskImpact').value = 'medium';
        setTodayDate();
        
        saveTasks();
        showTasks();
        updateNumbers();
        return false;
    }

    // Calculate priority score
    function getPriority(task) {
        var urgencyScore = task.urgency === 'high' ? 3 : task.urgency === 'medium' ? 2 : 1;
        var impactScore = task.impact === 'high' ? 3 : task.impact === 'medium' ? 2 : 1;
        return urgencyScore * impactScore;
    }

    // Check if overdue
    function isTaskOverdue(task) {
        var today = new Date();
        var due = new Date(task.dueDate);
        return due < today && task.status === 'active';
    }

    // Show tasks
    function showTasks() {
        var list = document.getElementById('taskList');
        
        if (allTasks.length === 0) {
            list.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">Add your first task to get started!</div>';
            return;
        }

        // Sort tasks
        var sorted = allTasks.slice().sort(function(a, b) {
            if (isTaskOverdue(a) && !isTaskOverdue(b)) return -1;
            if (!isTaskOverdue(a) && isTaskOverdue(b)) return 1;
            return getPriority(b) - getPriority(a);
        });

        var html = '';
        for (var i = 0; i < sorted.length; i++) {
            var task = sorted[i];
            if (task.status !== 'active') continue;
            
            var cat = taskCategories[task.category];
            var priority = getPriority(task);
            var overdue = isTaskOverdue(task);
            
            var cssClass = 'task-item ';
            if (overdue) cssClass += 'overdue';
            else if (priority >= 6) cssClass += 'urgent';
            else if (priority >= 4) cssClass += 'important';
            else cssClass += 'normal';

            var priorityText = priority >= 6 ? 'URGENT' : priority >= 4 ? 'Important' : 'Normal';
            var priorityClass = priority >= 6 ? 'priority-urgent' : priority >= 4 ? 'priority-important' : 'priority-normal';

            html += '<div class="' + cssClass + '">';
            html += '<div class="task-title">';
            html += '<button onclick="openTaskModal(' + task.id + ')" style="background:none;border:none;cursor:pointer;color:#666;">‚≠ï</button>';
            html += '<span>' + cat.icon + '</span>';
            html += '<span>' + task.title + '</span>';
            if (overdue) html += '<span style="color:#f44336;">‚ö†Ô∏è</span>';
            html += '</div>';
            
            html += '<div class="task-meta">';
            html += '<span>' + cat.name + '</span>';
            html += '<span>' + task.time + 'min</span>';
            html += '<span class="priority-badge ' + priorityClass + '">' + priorityText + '</span>';
            html += '<span>üë§ ' + task.assignee + '</span>';
            html += '<span style="' + (overdue ? 'color:#f44336;font-weight:bold;' : '') + '">üìÖ ' + task.dueDate + '</span>';
            html += '</div>';
            
            html += '<div class="task-actions">';
            html += '<button onclick="editTaskTitle(' + task.id + ')" title="Edit">‚úèÔ∏è</button>';
            html += '<button onclick="deleteTask(' + task.id + ')" title="Delete" style="color:#f44336;">üóëÔ∏è</button>';
            html += '</div>';
            html += '</div>';
        }
        
        list.innerHTML = html;
    }

    // Update stats
    function updateNumbers() {
        var activeTasks = [];
        for (var i = 0; i < allTasks.length; i++) {
            if (allTasks[i].status === 'active') {
                activeTasks.push(allTasks[i]);
            }
        }
        
        var totalTime = 0;
        var highPriority = 0;
        var overdue = 0;
        
        for (var i = 0; i < activeTasks.length; i++) {
            totalTime += activeTasks[i].time;
            if (getPriority(activeTasks[i]) >= 6) highPriority++;
            if (isTaskOverdue(activeTasks[i])) overdue++;
        }

        var hours = Math.floor(totalTime / 60);
        var mins = totalTime % 60;
        
        document.getElementById('totalTime').textContent = hours + 'h ' + mins + 'm';
        document.getElementById('highPriority').textContent = highPriority;
        document.getElementById('completedTasks').textContent = completedTasks.length;
        document.getElementById('overdueTasks').textContent = overdue;
    }

    // Open task completion modal
    function openTaskModal(taskId) {
        currentTask = null;
        for (var i = 0; i < allTasks.length; i++) {
            if (allTasks[i].id === taskId) {
                currentTask = allTasks[i];
                break;
            }
        }
        
        if (currentTask) {
            var content = document.getElementById('closureContent');
            content.innerHTML = '<h4>Close Task: ' + currentTask.title + '</h4>' +
                '<p style="margin:15px 0;color:#666;">Mark this task as completed?</p>' +
                '<button onclick="markCompleted()" class="btn btn-success" style="width:100%;margin-bottom:15px;">‚úÖ Mark as Completed</button>' +
                '<div style="border:1px solid #ffa726;background:#fff3e0;padding:15px;border-radius:4px;">' +
                '<p style="font-weight:bold;margin-bottom:10px;">‚ö†Ô∏è Close without completing</p>' +
                '<textarea id="closeReason" placeholder="Why wasn\'t this completed?" class="form-control" rows="3"></textarea>' +
                '<button onclick="closeIncomplete()" class="btn btn-warning" style="width:100%;margin-top:10px;">Close with Reason</button>' +
                '</div>';
            
            document.getElementById('closureModal').classList.add('show');
        }
    }

    // Mark task as completed
    function markCompleted() {
        if (currentTask) {
            currentTask.status = 'completed';
            currentTask.completedDate = new Date().toISOString().split('T')[0];
            currentTask.reason = 'completed';
            completedTasks.push(currentTask);
            
            saveTasks();
            showTasks();
            updateNumbers();
            closeModal('closureModal');
        }
    }

    // Close task incomplete
    function closeIncomplete() {
        var reason = document.getElementById('closeReason').value;
        if (!reason.trim()) {
            alert('Please provide a reason');
            return;
        }
        
        if (currentTask) {
            currentTask.status = 'closed';
            currentTask.completedDate = new Date().toISOString().split('T')[0];
            currentTask.reason = reason;
            completedTasks.push(currentTask);
            
            saveTasks();
            showTasks();
            updateNumbers();
            closeModal('closureModal');
        }
    }

    // Edit task title
    function editTaskTitle(taskId) {
        var task = null;
        for (var i = 0; i < allTasks.length; i++) {
            if (allTasks[i].id === taskId) {
                task = allTasks[i];
                break;
            }
        }
        
        if (task) {
            var newTitle = prompt('Edit task title:', task.title);
            if (newTitle && newTitle.trim()) {
                task.title = newTitle.trim();
                saveTasks();
                showTasks();
            }
        }
    }

    // Delete task
    function deleteTask(taskId) {
        if (confirm('Delete this task?')) {
            var newTasks = [];
            for (var i = 0; i < allTasks.length; i++) {
                if (allTasks[i].id !== taskId) {
                    newTasks.push(allTasks[i]);
                }
            }
            allTasks = newTasks;
            saveTasks();
            showTasks();
            updateNumbers();
        }
    }

    // Show report
    function showReport() {
        var active = 0;
        var completed = 0;
        var incomplete = 0;
        var overdue = 0;
        
        for (var i = 0; i < allTasks.length; i++) {
            if (allTasks[i].status === 'active') {
                active++;
                if (isTaskOverdue(allTasks[i])) overdue++;
            }
        }
        
        for (var i = 0; i < completedTasks.length; i++) {
            if (completedTasks[i].reason === 'completed') {
                completed++;
            } else {
                incomplete++;
            }
        }

        var content = document.getElementById('reportContent');
        content.innerHTML = '<div class="stats">' +
            '<div class="stat-card blue"><div>Active Tasks</div><div class="stat-number">' + active + '</div></div>' +
            '<div class="stat-card green"><div>Completed</div><div class="stat-number">' + completed + '</div></div>' +
            '<div class="stat-card orange"><div>Incomplete</div><div class="stat-number">' + incomplete + '</div></div>' +
            '<div class="stat-card red"><div>Overdue</div><div class="stat-number">' + overdue + '</div></div>' +
            '</div>';
        
        document.getElementById('reportModal').classList.add('show');
    }

    // Export data
    function exportData() {
        var data = {
            date: new Date().toISOString().split('T')[0],
            activeTasks: allTasks,
            completedTasks: completedTasks
        };
        
        var text = JSON.stringify(data, null, 2);
        var blob = new Blob([text], {type: 'application/json'});
        var url = URL.createObjectURL(blob);
        var link = document.createElement('a');
        link.href = url;
        link.download = 'roofing-tasks-' + data.date + '.json';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }

    // Close modal
    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('show');
    }

    // Save tasks to localStorage
    function saveTasks() {
        try {
            var data = {
                tasks: allTasks,
                completed: completedTasks
            };
            localStorage.setItem('roofingTasks', JSON.stringify(data));
        } catch (e) {
            console.log('Could not save tasks');
        }
    }

    // Load tasks from localStorage
    function loadTasks() {
        try {
            var saved = localStorage.getItem('roofingTasks');
            if (saved) {
                var data = JSON.parse(saved);
                allTasks = data.tasks || [];
                completedTasks = data.completed || [];
            }
        } catch (e) {
            console.log('Could not load tasks');
        }
    }

    // Enter key for password
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                doLogin();
            }
        });
        
        // Close modals on click outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });
    });
</script>
```

</body>
</html>